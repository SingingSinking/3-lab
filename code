#include <iostream>
#include <iomanip>
#include <fstream>
#include <cmath>
using namespace std;
fstream f;
int main() {
	setlocale(0, "");
	double a, s, T;
	int i;
	cout << "Здравствуйте, данную лабораторную работ выполнил Гранин Владислав Анатольевич, группа 1309"
		<< '\n' << "Начало: 17.11.2021 8"
		<< '\n' << "Задание 3:"
		<< '\n' << "Условие задания: Среди чисел 1, 1+1/2, 1+1/2+1/3,... найти первое число, которое больше заданного числа T."
		<< '\n' << "Найти: s > T" << '\n';
	cout << "Введите: T (T>0)";
	cin >> T;
	i = 0;
	while (T < 0 && i < 3) {
		cout << "T < 0, попробуйте ввести другое значение T" << '\n';
		cin >> T;
		i++;
	} if (T < 0 && i >= 3) cout << "error" << '\n';
	else {
		i = 0;
		s = 0;
		a = 0;
		cout << "_i___|_____a______________________|_____s__________________________________________________\n";
		cout << left << scientific << setw(5) << i << "|"

			<< setw(28) << setprecision(15) << a << "|"

			<< setw(60) << setprecision(35) << s << '\n';
		i = 1;
		while ((s < T) && (i < 1000)) {
			s += (float)1 / i;
			a = (float)1 / i;
			if (i % 20 == 0 && i > 0) {

				cout << "_i___|_____a______________________|_____s__________________________________________________\n";

			}
			cout << left << scientific << setw(5) << i << "|"

				<< setw(28) << setprecision(15) << a << "|"

				<< setw(60) << setprecision(35) << s << '\n';
			i++;
		}
		cout << "Суммарное всех членов последовательности: " << s << '\n'
			<< "Последний член последовательности: " << a << '\n'
			<< "Кол-во членов последовательности: " << (i - 1);

		f.open("Lab3.txt", ios::out);
		i = 0;
		s = 0;
		a = 0;
		f << "_i___|_____a______________________|_____s__________________________________________________\n";
		f << left << scientific << setw(5) << i << "|"

			<< setw(28) << setprecision(15) << a << "|"

			<< setw(60) << setprecision(35) << s << '\n';
		i = 1;
		while ((s < T) && (i < 1000)) {
			s += (float)1 / i;
			a = (float)1 / i;
			f << left << scientific << setw(5) << i << "|"

				<< setw(28) << setprecision(15) << a << "|"

				<< setw(60) << setprecision(35) << s << '\n';
			i++;
		}
		f << "Суммарное всех членов последовательности: " << s << '\n'
			<< "Последний член последовательности: " << a << '\n'
			<< "Кол-во членов последовательности: " << (i - 1);
		f.close();
	}
		return 0;

}
